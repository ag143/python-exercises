<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GoJS Dynamic Sidebar</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gojs/2.3.11/go.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            height: 100vh;
            margin: 0;
        }
        header {
            background-color: #333;
            color: white;
            padding: 10px;
            text-align: center;
        }
        .container {
            display: flex;
            flex: 1;
        }
        .sidebar {
            width: 250px;
            min-width: 5%;
            max-width: 250px;
            background-color: #f4f4f4;
            overflow-y: auto;
            padding: 10px;
            transition: width 0.3s;
        }
        .sidebar.collapsed {
            width: 5%;
            overflow: hidden;
            padding: 10px 5px;
        }
        .content {
            flex: 1;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        select, input {
            width: 100%;
            padding: 5px;
            margin-bottom: 10px;
        }
        .list-item {
            padding: 8px;
            background-color: #ddd;
            margin: 5px 0;
            cursor: pointer;
        }
        .list-item:hover {
            background-color: #bbb;
        }
        #myDiagramDiv {
            width: 100%;
            max-width: 100%;
            height: 80vh;
            border: 1px solid black;
            background-color: #f9f9f9;
            padding: 10px;
            overflow: auto;
            white-space: pre-wrap;
            font-family: monospace;
            box-sizing: border-box;
            word-wrap: break-word;
            overflow-wrap: break-word;
            max-width: 100ch;
        }
        .toggle-btn {
            position: absolute;
            left: 10px;
            top: 10px;
            background: #333;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <header>
        <button class="toggle-btn" onclick="toggleSidebar()">â˜°</button>
        <h1>GoJS Dynamic Sidebar</h1>
    </header>
    <div class="container">
        <div class="sidebar" id="sidebar">
            <select id="menuSelect"></select>
            <input type="text" id="search" placeholder="Search...">
            <div id="menuList"></div>
        </div>
        <div class="content">
            <div id="myDiagramDiv"></div>
        </div>
    </div>

    <script>
        function toggleSidebar() {
            document.getElementById("sidebar").classList.toggle("collapsed");
        }

        let dataSets = {
            set1: [
                { id: 1, name: "code.js", code: "code.java" },
                { id: 2, name: "code.py", code: "code.py" },
                { id: 3, name: "code.html", code: "code.html" }
            ],
            set2: [
                { id: 4, name: "code.css", code: "code.css" },
                { id: 5, name: "code.java", code: "code.java" },
                { id: 6, name: "code.json", code: "code.json" }
            ],
            set3: [
                {id:1,name: ".github",code:".github"},
{id:2,name:".\exercises",code:".\exercises"},
{id:3,name:".\images",code:".\images"},
{id:4,name:".\scripts",code:".\scripts"},
{id:5,name:".\solutions",code:".\solutions"},
{id:6,name:".gitignore",code:".gitignore"},
{id:7,name:".\output.txt",code:".\output.txt"},
{id:8,name:".\README.md",code:".\README.md"},
{id:9,name:".\tox.ini",code:".\tox.ini"},
{id:10,name:".github\workflows",code:".github\workflows"},
{id:11,name:".github\workflows\pipeline.yaml",code:".github\workflows\pipeline.yaml"},
{id:12,name:".\exercises\booleans",code:".\exercises\booleans"},
{id:13,name:".\exercises\capitalize",code:".\exercises\capitalize"},
{id:14,name:".\exercises\classes",code:".\exercises\classes"},
{id:15,name:".\exercises\count_substring",code:".\exercises\count_substring"},
{id:16,name:".\exercises\data_types",code:".\exercises\data_types"},
{id:17,name:".\exercises\exceptions",code:".\exercises\exceptions"},
{id:18,name:".\exercises\files",code:".\exercises\files"},
{id:19,name:".\exercises\functions",code:".\exercises\functions"},
{id:20,name:".\exercises\hello_world",code:".\exercises\hello_world"},
{id:21,name:".\exercises\improve_the_code",code:".\exercises\improve_the_code"},
{id:22,name:".\exercises\Lambda",code:".\exercises\Lambda"},
{id:23,name:".\exercises\lists",code:".\exercises\lists"},
{id:24,name:".\exercises\loops",code:".\exercises\loops"},
{id:25,name:".\exercises\magic_methods",code:".\exercises\magic_methods"},
{id:26,name:".\exercises\misc",code:".\exercises\misc"},
{id:27,name:".\exercises\numbers",code:".\exercises\numbers"},
{id:28,name:".\exercises\oop",code:".\exercises\oop"},
{id:29,name:".\exercises\os",code:".\exercises\os"},
{id:30,name:".\exercises\strings",code:".\exercises\strings"},
{id:31,name:".\exercises\swap_case",code:".\exercises\swap_case"},
{id:32,name:".\exercises\type_hinting",code:".\exercises\type_hinting"},
                ]
        };

        function populateDropdown() {
            let menuSelect = document.getElementById("menuSelect");
            menuSelect.innerHTML = "";
            Object.keys(dataSets).forEach(set => {
                let option = document.createElement("option");
                option.value = set;
                option.textContent = set.charAt(0).toUpperCase() + set.slice(1);
                menuSelect.appendChild(option);
            });
        }

        function updateMenu() {
            let selectedSet = document.getElementById("menuSelect").value;
            let menuList = document.getElementById("menuList");
            menuList.innerHTML = "";
            dataSets[selectedSet].forEach(item => {
                let div = document.createElement("div");
                div.className = "list-item";
                div.dataset.code = item.code;
                div.innerText = item.name;
                div.onclick = function () { loadExternalCode(item.code); };
                menuList.appendChild(div);
            });
        }

        document.getElementById("search").addEventListener("input", function () {
            let searchTerm = this.value.toLowerCase();
            document.querySelectorAll(".list-item").forEach(item => {
                item.style.display = item.innerText.toLowerCase().includes(searchTerm) ? "block" : "none";
            });
        });

        function loadExternalCode(filename) {
            fetch(filename)
                .then(response => response.text())
                .then(data => {
                    document.getElementById("myDiagramDiv").textContent = data;
                })
                .catch(error => {
                    document.getElementById("myDiagramDiv").textContent = "Error loading " + filename;
                });
        }

        document.getElementById("menuSelect").addEventListener("change", updateMenu);
        populateDropdown();
        updateMenu();
    </script>
</body>
</html>
